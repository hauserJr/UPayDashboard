import{a as m,r as o,o as C,c as n,b as e,w as M,v as U,n as y,d as p,t as f,e as _,f as i}from"./index-D2DINZ19.js";const b={getSettings(){return m.get("/merchant/merchant-settings")},setCallbackUrl(g){return m.post(`/Merchant/${encodeURIComponent(g)}`)}},S={class:"space-y-6"},B={class:"bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl p-6 shadow-xl"},K={class:"space-y-6"},A={class:"flex items-center space-x-3"},T={class:"relative flex-1"},V=["value"],j={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},z={key:1,class:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},F={class:"relative"},H={class:"pt-4 flex items-center justify-end border-t border-gray-700"},I=["disabled"],L={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},N={__name:"MerchantSettings",setup(g){const a=o({apiKey:"",callbackUrl:""}),l=o(!1),r=o(""),c=o(!1),u=o(!1),v=o(!1),x=async()=>{try{const s=await b.getSettings();console.log(s),s.data.statusCode===200&&(a.value=s.data.data)}catch(s){console.error("Failed to fetch settings:",s),d("Failed to load settings",!1)}},h=async()=>{if(!a.value.callbackUrl){d("Callback URL is required",!1),u.value=!0;return}l.value=!0,u.value=!1,r.value="";try{await b.setCallbackUrl(a.value.callbackUrl),d("Settings saved successfully",!0)}catch(s){console.error("Failed to save settings:",s),d(s.response?.data?.message||"Failed to save settings",!1)}finally{l.value=!1}},k=async()=>{try{await navigator.clipboard.writeText(a.value.apiKey),v.value=!0,setTimeout(()=>{v.value=!1},2e3)}catch(s){console.error("Failed to copy:",s)}},d=(s,t)=>{r.value=s,c.value=t,setTimeout(()=>{r.value=""},3e3)};return C(()=>{x()}),(s,t)=>(i(),n("div",S,[t[9]||(t[9]=e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-2xl font-bold text-white tracking-tight"},"Merchant Settings")],-1)),e("div",B,[e("div",K,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"API Key",-1)),e("div",A,[e("div",T,[e("input",{style:{cursor:"not-allowed"},type:"text",value:a.value.apiKey,readonly:"",class:"w-full bg-gray-900/50 border border-gray-600 text-gray-300 text-sm rounded-lg focus:ring-secondary focus:border-secondary block p-3 pr-10 font-mono"},null,8,V),t[1]||(t[1]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[e("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1))]),e("button",{onClick:k,class:"px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors duration-200 flex items-center shadow-lg border border-gray-600",title:"Copy API Key"},[v.value?(i(),n("svg",z,[...t[3]||(t[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(i(),n("svg",j,[...t[2]||(t[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"},null,-1)])]))])]),t[5]||(t[5]=e("p",{class:"mt-2 text-xs text-gray-500"},"This key is used to authenticate your API requests. Keep it secret.",-1))]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-400 mb-2"},"Callback URL",-1)),e("div",F,[M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=w=>a.value.callbackUrl=w),type:"url",placeholder:"https://your-domain.com/api/callback",class:y(["w-full bg-gray-900/50 border border-gray-600 text-white text-sm rounded-lg focus:ring-secondary focus:border-secondary block p-3 transition-colors duration-200",{"border-red-500 focus:border-red-500 focus:ring-red-500":u.value}])},null,2),[[U,a.value.callbackUrl]])]),t[7]||(t[7]=e("p",{class:"mt-2 text-xs text-gray-500"},"System will send payment notifications to this URL.",-1))]),e("div",H,[r.value?(i(),n("span",{key:0,class:y([{"text-green-400":c.value,"text-red-400":!c.value},"mr-4 text-sm font-medium animate-pulse"])},f(r.value),3)):p("",!0),e("button",{onClick:h,disabled:l.value,class:"px-6 py-2.5 bg-gradient-to-r from-secondary to-emerald-600 hover:from-emerald-500 hover:to-emerald-700 text-white font-medium rounded-lg shadow-lg transform transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center"},[l.value?(i(),n("svg",L,[...t[8]||(t[8]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):p("",!0),_(" "+f(l.value?"Saving...":"Save Changes"),1)],8,I)])])])]))}};export{N as default};
